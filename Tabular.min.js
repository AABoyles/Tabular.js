/*! Tabular.js 2014-04-29 */
window.tabular={},tabular.table2Array=function(a){var b=0,c=a.getElementsByTagName("tr"),d=[],e=c[0].getElementsByTagName("th");if(e.length>0){for(var f=[],g=0;g<e.length;g++)f.push(e[g].innerHTML.trim());d.push(f),b++}for(b;b<c.length;b++){var f=[];e=c[b].getElementsByTagName("td");for(var g=0;g<e.length;g++)f.push(e[g].innerHTML.trim());d.push(f)}return d},tabular.table2Object=function(a){var b=a.getElementsByTagName("tr"),c=b[0].getElementsByTagName("th"),d=[];if(c.length>0)for(var e=0;e<c.length;e++)d.push(c[e].innerHTML.trim());for(var f=[],g=1;g<b.length;g++){var h={};c=b[g].getElementsByTagName("td");for(var e=0;e<c.length;e++)h[d[e]]=c[e].innerHTML.trim();f.push(h)}return f},tabular.table2CSV=function(a,b){a=tabular.table2Array(),b||(b=",");for(var c=new RegExp(b,"g"),d="",e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)textcells[f]=a[e][f].replace(c,"");d+=textcells.join(b)+"\n"}return d},tabular.table2CSVURL=function(a,b){b||(b="csv");var c="data:";switch(b){case"csv":default:c+="application/csv;charset=utf-8,"+encodeURI(tabular.table2CSV(a))}return c},tabular.csv2Array=function(a,b,c){var d=tabular.csv2Array(a);c!==!1&&(c=!0);var e="<table><thead>",f=0;for(c&&(e+="<tr><th>"+d[f++].join("</th><th>")+"</th></tr>"),e+="</thead><tbody>",f;f<d.length;f++)e+="<tr><td>"+d[f].join("</td><td>")+"</td></tr>";return e+="</tbody><tfoot></tfoot></table>"},tabular.csv2Table=function(a,b,c){var d=tabular.csv2Array(a);c!==!1&&(c=!0);var e="<table><thead>",f=0;for(c&&(e+="<tr><th>"+d[f++].join("</th><th>")+"</th></tr>"),e+="</thead><tbody>",f;f<d.length;f++)e+="<tr><td>"+d[f].join("</td><td>")+"</td></tr>";return e+="</tbody><tfoot></tfoot></table>"},tabular.csv2Object=function(){},tabular.parser={},tabular.parser.RELAXED=!0,tabular.parser.IGNORE_RECORD_LENGTH=!1,tabular.parser.IGNORE_QUOTES=!1,tabular.parser.LINE_FEED_OK=!0,tabular.parser.CARRIAGE_RETURN_OK=!0,tabular.parser.DETECT_TYPES=!0,tabular.parser.IGNORE_QUOTE_WHITESPACE=!0,tabular.parser.DEBUG=!1,tabular.parser.ERROR_EOF="UNEXPECTED_END_OF_FILE",tabular.parser.ERROR_CHAR="UNEXPECTED_CHARACTER",tabular.parser.ERROR_EOL="UNEXPECTED_END_OF_RECORD",tabular.parser.WARN_SPACE="UNEXPECTED_WHITESPACE";var QUOTE='"',CR="\r",LF="\n",COMMA=",",SPACE=" ",TAB="	",PRE_TOKEN=0,MID_TOKEN=1,POST_TOKEN=2,POST_RECORD=4;tabular.parser.parse=function(a){var b=tabular.parser.result=[];tabular.parser.offset=0,tabular.parser.str=a,tabular.parser.record_begin(),tabular.parser.debug("parse()",a);for(var c;;){if(c=a[tabular.parser.offset++],tabular.parser.debug("c",c),null==c){tabular.parser.escaped&&tabular.parser.error(tabular.parser.ERROR_EOF),tabular.parser.record&&(tabular.parser.token_end(),tabular.parser.record_end()),tabular.parser.debug("...bail",c,tabular.parser.state,tabular.parser.record),tabular.parser.reset();break}if(null==tabular.parser.record){if(tabular.parser.RELAXED&&(c==LF||c==CR&&a[tabular.parser.offset+1]==LF))continue;tabular.parser.record_begin()}if(tabular.parser.state==PRE_TOKEN){if((c===SPACE||c===TAB)&&tabular.parser.next_nonspace()==QUOTE){if(tabular.parser.RELAXED||tabular.parser.IGNORE_QUOTE_WHITESPACE)continue;tabular.parser.warn(tabular.parser.WARN_SPACE)}if(c==QUOTE&&!tabular.parser.IGNORE_QUOTES){tabular.parser.debug("...escaped start",c),tabular.parser.escaped=!0,tabular.parser.state=MID_TOKEN;continue}tabular.parser.state=MID_TOKEN}tabular.parser.state==MID_TOKEN&&tabular.parser.escaped?c==QUOTE?a[tabular.parser.offset]==QUOTE?(tabular.parser.debug("...escaped quote",c),tabular.parser.token+=QUOTE,tabular.parser.offset++):(tabular.parser.debug("...escaped end",c),tabular.parser.escaped=!1,tabular.parser.state=POST_TOKEN):(tabular.parser.token+=c,tabular.parser.debug("...escaped add",c,tabular.parser.token)):c==CR?(a[tabular.parser.offset]==LF?tabular.parser.offset++:tabular.parser.CARRIAGE_RETURN_OK||tabular.parser.error(tabular.parser.ERROR_CHAR),tabular.parser.token_end(),tabular.parser.record_end()):c==LF?(tabular.parser.LINE_FEED_OK||tabular.parser.RELAXED||tabular.parser.error(tabular.parser.ERROR_CHAR),tabular.parser.token_end(),tabular.parser.record_end()):c==COMMA?tabular.parser.token_end():tabular.parser.state==MID_TOKEN?(tabular.parser.token+=c,tabular.parser.debug("...add",c,tabular.parser.token)):c===SPACE||c===TAB?tabular.parser.IGNORE_QUOTE_WHITESPACE||tabular.parser.error(tabular.parser.WARN_SPACE):tabular.parser.RELAXED||tabular.parser.error(tabular.parser.ERROR_CHAR)}return b},tabular.parser.reset=function(){tabular.parser.state=null,tabular.parser.token=null,tabular.parser.escaped=null,tabular.parser.record=null,tabular.parser.offset=null,tabular.parser.result=null,tabular.parser.str=null},tabular.parser.next_nonspace=function(){for(var a,b=tabular.parser.offset;b<tabular.parser.str.length;)if(a=tabular.parser.str[b++],a!=SPACE&&a!==TAB)return a;return null},tabular.parser.record_begin=function(){tabular.parser.escaped=!1,tabular.parser.record=[],tabular.parser.token_begin(),tabular.parser.debug("record_begin")},tabular.parser.record_end=function(){tabular.parser.state=POST_RECORD,!tabular.parser.IGNORE_RECORD_LENGTH&&!tabular.parser.RELAXED&&tabular.parser.result.length>0&&tabular.parser.record.length!=tabular.parser.result[0].length&&tabular.parser.error(tabular.parser.ERROR_EOL),tabular.parser.result.push(tabular.parser.record),tabular.parser.debug("record end",tabular.parser.record),tabular.parser.record=null},tabular.parser.resolve_type=function(a){return a.match(/^\d+(\.\d+)?$/)?a=parseFloat(a):a.match(/^true|false$/i)?a=Boolean(a.match(/true/i)):"undefined"===a?a=void 0:"null"===a&&(a=null),a},tabular.parser.token_begin=function(){tabular.parser.state=PRE_TOKEN,tabular.parser.token=""},tabular.parser.token_end=function(){tabular.parser.DETECT_TYPES&&(tabular.parser.token=tabular.parser.resolve_type(tabular.parser.token)),tabular.parser.record.push(tabular.parser.token),tabular.parser.debug("token end",tabular.parser.token),tabular.parser.token_begin()},tabular.parser.debug=function(){tabular.parser.DEBUG&&console.log(arguments)},tabular.parser.dump=function(a){return[a,"at char",tabular.parser.offset,":",tabular.parser.str.substr(tabular.parser.offset-50,50).replace(/\r/gm,"\\r").replace(/\n/gm,"\\n").replace(/\t/gm,"\\t")].join(" ")},tabular.parser.error=function(a){var b=tabular.parser.dump(a);throw tabular.parser.reset(),b},tabular.parser.warn=function(a){var b=tabular.parser.dump(a);try{return void console.warn(b)}catch(c){}try{console.log(b)}catch(c){}},tabular.csv2Array=tabular.parser.parse,tabular.parseCSV=tabular.parser.parse;